import sys

import requests
import re
from io import BytesIO
import PyPDF2

ip = sys.argv[1]
url = 'http://%s:8888/rendered_docs/' % ip

r = requests.get(url)

docs = set(re.findall('\w+.pdf', r.text))

for doc in docs:
    resp = requests.get(url + doc, stream=True)
    b_io = BytesIO(resp.raw.read())
    reader = PyPDF2.PdfFileReader(b_io)
    page = reader.getPage(0)
    text = page.extractText()
    print(text)
